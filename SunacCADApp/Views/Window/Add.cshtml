@{
    Layout = "~/Views/_LayoutPage.cshtml";
}
@using SunacCADApp.Entity
<div class="row topnav">
    <a>标准部品库</a>
    <i></i>
    <a>外窗</a>
    <i></i>
    <a>CD02X1外开双扇下</a>
</div>
<div class="row view">
    <div class="left-column">
        <figure>
            <img src="~/Content/Css/img/icon-no-image.png" width="238" heigth="200" />
            <p>CDA双开窗下</p>
        </figure>
    </div>
    <div class="mian-column">
        <form name="myform" id="myform">
            <dl>
                <dt><i>*</i>原型编号:</dt>
                <dd>
                    <input type="text" style="width:450px" name="txt_drawingcode" class="required" />
                </dd>
            </dl>
            <dl>
                <dt><i>*</i>原型名称:</dt>
                <dd>
                    <input type="text" style="width:450px" name="txt_drawingname" class="required"/>
                </dd>
            </dl>
            <dl>
                <dt><i>*</i>原型dwg文件:</dt>
                <dd>
                    <span class="upfile">
                         <input type="file"  />
                        <input type="hidden" name="cad_file"/>
                    </span>
                    <span class="upfile">
                        <input type="file" />
                    </span>
                    <span class="upfile">
                        <input type="file" />
                    </span>
                    <span class="upfile">
                        <input type="file" />
                    </span>
                </dd>
            </dl>
            <dl>
                <dt><i>*</i>使用范围:</dt>
                <dd style="width:500px;">
                    <span style="display:block;padding-top:5px;line-height:35px;">
                        <span class="online-checkbox">
                            <input type="checkbox" id="all" name="chk_area" class="select-all" />
                            <label for="all">全部</label>
                        </span>
                        <span class="online-checkbox">
                            <input type="checkbox" id="all_group" name="chekbox_group" class="single-checkbox"  value="0"/>
                            <label for="all_group">集团</label>
                        </span>
                        @foreach (BasArgumentSetting Setting in ViewBag.Settings)
                        {
                            <span class="online-checkbox">
                                <input type="checkbox" id="area_@Setting.Id" value="@Setting.Id" name="checkbox_areaid" class="single-checkbox" />
                                <label for="area_@Setting.Id">@Setting.ArgumentText</label>
                            </span>
                        }
                    </span>

                </dd>
            </dl>
            <dl>
                <dt><i>*</i>模块类型：</dt>
                <dd>
                    <span class="online-checkbox">
                        <input type="radio" name="radio_module" id="radio_dynamic_module" value="1" checked data-model=".dynamic_module" />
                        <label for="radio_dynamic_module">动态模型</label>
                    </span>
                    <span class="online-checkbox">
                        <input type="radio" name="radio_module" id="radio_static_module" value="2" data-model=".static_module" />
                        <label for="radio_static_module">静态模型</label>
                    </span>
                </dd>
            </dl>
            <dl>
                <dt><i></i>功能区类型：</dt>
                <dd style="width:500px;">
                    <span style="display:block;padding-top:5px;line-height:35px;">
                        <span class="online-checkbox">
                            <input type="checkbox" id="actiontype_all" name="ActionTypeAll" value="0"  class="select-all"/>
                            <label for="actiontype_all">全部</label>
                        </span>
                        @foreach (BasArgumentSetting ActionType in ViewBag.ActionTypes)
                        {
                            <span class="online-checkbox">
                                <input type="checkbox" id="actiontype_@ActionType.Id" name="ActionType" value="@ActionType.Id" class="single-checkbox" />
                                <label for="actiontype_@ActionType.Id">@ActionType.ArgumentText</label>
                            </span>
                        }
                    </span>
                </dd>
            </dl>
            <dl>
                <dt><i>*</i>开启类型：</dt>
                <dd>
                    <select name="OpenType">
                        @foreach (BasArgumentSetting OpenType in ViewBag.OpenTypes)
                        {
                            <option value="@OpenType.Id">@OpenType.ArgumentText</option>
                        }
                    </select>
                </dd>
            </dl>
            <dl>
                <dt><i>*</i>开启扇数量：</dt>
                <dd>
                    <select name="OpenWindowNum">
                        @foreach (BasArgumentSetting OpenType in ViewBag.OpenWindowNums)
                        {
                            <option value="@OpenType.Id">@OpenType.ArgumentText 扇</option>
                        }
                    </select>
                </dd>
            </dl>
            <dl>
                <dt><i>*</i>是否对称窗型：</dt>
                <dd>
                    <span class="online-checkbox">
                        <input type="radio" name="Radio_WindowHasCorner" id="Radio_WindowHasCorner"  checked/>
                        <label for="Radio_WindowHasCorner">是</label>
                    </span>
                    <span class="online-checkbox">
                        <input type="radio" name="Radio_WindowHasCorner" id="Radio_WindowHasCorner1" />
                        <label for="Radio_WindowHasCorner1">否</label>
                    </span>
                </dd>
            </dl>
            <dl>
                <dt><i>*</i>是否转角窗型：</dt>
                <dd>
                    <span class="online-checkbox">
                        <input type="radio" name="Radio_WindowHasSymmetry" id="Radio_WindowHasSymmetry"  checked/>
                        <label for="Radio_WindowHasSymmetry">是</label>
                    </span>
                    <span class="online-checkbox">
                        <input type="radio" name="Radio_WindowHasSymmetry" id="Radio_WindowHasSymmetry1" />
                        <label for="Radio_WindowHasSymmetry1">否</label>
                    </span>
                </dd>
            </dl>
            <dl class="dynamic_module">
                <dt><i>*</i>宽度尺寸范围（mm）：</dt>
                <dd>
                    <input type="text" style="width:50px" name="txtWindowSizeMin"  />
                    <i> -- &nbsp; </i>
                    <input type="text" style="width:50px" name="txtWindowSizeMax"  />
                </dd>
            </dl>
            <dl class="dynamic_module">
                <dt><i>*</i>通风量计算公式：</dt>
                <dd>
                    <input type="text" style="width:450px" name="txtWindowDesignFormula" />

                </dd>
            </dl>


            <dl class="static_module">
                <dt><i>*</i>尺寸（mm）：</dt>
                <dd>
                    <em>宽</em>
                    <input type="text" style="width:50px" value="" name="txt_Window_Width" />&nbsp;
                    <em>高 </em>
                    <input type="text" style="width:50px" name="txt_Window_Height" />
                </dd>
            </dl>
            <dl class="static_module">
                <dt><i>*</i>通风量：</dt>
                <dd>
                    <input type="text" style="width:80px" name="txt_WindowVentilationQuantity" />

                </dd>
            </dl>
            <dl class="static_module">
                <dt><i></i>塞缝尺寸：</dt>
                <dd>
                    <input type="text" style="width:80px" name="txtWindowPlugslotSize" />

                </dd>
            </dl>
            <dl class="static_module">
                <dt>&nbsp;</dt>
                <dd>
                    <span class="online-checkbox">
                        <input type="checkbox" name="Checkbox_WindowAuxiliaryFrame" id="Checkbox_WindowAuxiliaryFrame" />
                        <label for="Checkbox_WindowAuxiliaryFrame">是否有附框</label>
                    </span>
                </dd>
            </dl>
            <dl>
                <dt><i></i>参数取值：</dt>
            </dl>
            <dl>
                <dd>
                    <table class="table table-bordered param" style="margin-left:60px;margin-right:60px; width:620px;">
                        <thead>
                            <tr>
                                <th width="80" class="text-center">尺寸代码</th>
                                <th width="70" class="text-center">值类型</th>
                                <th width="110" class="text-center">值</th>
                                <th width="70" class="text-center">最大值</th>
                                <th width="70" class="text-center">最小值</th>
                                <th width="60" class="text-center">默认值</th>
                                <th class="text-center">说明</th>
                            </tr>
                        </thead>
                        <tbody>

                            <tr sizeno="W1">
                                <td class="text-center">W1</td>
                                <td valign="middle">
                                    <select name="ValueType">
                                        @foreach (DataSourceMember Member in ViewBag.Members)
                                        {
                                            <option value="@Member.ValueMember">@Member.DisplayMember</option>
                                        }
                                    </select>
                                </td>
                                <td class="value"><input type="text" class="input-val" name="Val" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-minvalue" name="MinValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-maxvalue" name="MaxValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-defaultvalue" name="DefaultValue" disabled="disabled" /></td>
                                <td class="desc"><input type="text" class="input-desc" name="Desc" /></td>
                            </tr>
                            <tr sizeno="W2">
                                <td class="text-center">W2</td>
                                <td valign="middle">
                                    <select name="ValueType">
                                        @foreach (DataSourceMember Member in ViewBag.Members)
                                        {
                                            <option value="@Member.ValueMember">@Member.DisplayMember</option>
                                        }
                                    </select>
                                </td>
                                <td class="value"><input type="text" class="input-val" name="Val" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-minvalue" name="MinValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-maxvalue" name="MaxValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-defaultvalue" name="DefaultValue" disabled="disabled" /></td>
                                <td class="desc"><input type="text" class="input-desc" name="Desc" /></td>
                            </tr>
                            <tr sizeno="W3">
                                <td class="text-center">W3</td>
                                <td valign="middle">
                                    <select name="ValueType">
                                        @foreach (DataSourceMember Member in ViewBag.Members)
                                        {
                                            <option value="@Member.ValueMember">@Member.DisplayMember</option>
                                        }
                                    </select>
                                </td>
                                <td class="value"><input type="text" class="input-val" name="Val" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-minvalue" name="MinValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-maxvalue" name="MaxValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-defaultvalue" name="DefaultValue" disabled="disabled" /></td>
                                <td class="desc"><input type="text" class="input-desc" name="Desc" /></td>
                            </tr>
                            <tr sizeno="W4">
                                <td class="text-center">W4</td>
                                <td valign="middle">
                                    <select name="ValueType">
                                        @foreach (DataSourceMember Member in ViewBag.Members)
                                        {
                                            <option value="@Member.ValueMember">@Member.DisplayMember</option>
                                        }
                                    </select>
                                </td>
                                <td class="value"><input type="text" class="input-val" name="Val" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-minvalue" name="MinValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-maxvalue" name="MaxValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-defaultvalue" name="DefaultValue" disabled="disabled" /></td>
                                <td class="desc"><input type="text" class="input-desc" name="Desc" /></td>
                            </tr>

                            <tr sizeno="H1">
                                <td class="text-center">H1</td>
                                <td valign="middle">
                                    <select name="ValueType">
                                        @foreach (DataSourceMember Member in ViewBag.Members)
                                        {
                                            <option value="@Member.ValueMember">@Member.DisplayMember</option>
                                        }
                                    </select>
                                </td>
                                <td class="value"><input type="text" class="input-val" name="Val" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-minvalue" name="MinValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-maxvalue" name="MaxValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-defaultvalue" name="DefaultValue" disabled="disabled" /></td>
                                <td class="desc"><input type="text" class="input-desc" name="Desc" /></td>
                            </tr>
                            <tr sizeno="H2">
                                <td class="text-center">H2</td>
                                <td valign="middle">
                                    <select name="ValueType">
                                        @foreach (DataSourceMember Member in ViewBag.Members)
                                        {
                                            <option value="@Member.ValueMember">@Member.DisplayMember</option>
                                        }
                                    </select>
                                </td>
                                <td class="value"><input type="text" class="input-val" name="Val" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-minvalue" name="MinValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-maxvalue" name="MaxValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-defaultvalue" name="DefaultValue" disabled="disabled" /></td>
                                <td class="desc"><input type="text" class="input-desc" name="Desc" /></td>
                            </tr>
                            <tr sizeno="H3">
                                <td class="text-center">H3</td>
                                <td valign="middle">
                                    <select name="ValueType">
                                        @foreach (DataSourceMember Member in ViewBag.Members)
                                        {
                                            <option value="@Member.ValueMember">@Member.DisplayMember</option>
                                        }
                                    </select>
                                </td>
                                <td class="value"><input type="text" class="input-val" name="Val" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-minvalue" name="MinValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-maxvalue" name="MaxValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-defaultvalue" name="DefaultValue" disabled="disabled" /></td>
                                <td class="desc"><input type="text" class="input-desc" name="Desc" /></td>
                            </tr>
                            <tr sizeno="H4">
                                <td class="text-center">H4</td>
                                <td valign="middle">
                                    <select name="ValueType">
                                        @foreach (DataSourceMember Member in ViewBag.Members)
                                        {
                                            <option value="@Member.ValueMember">@Member.DisplayMember</option>
                                        }
                                    </select>
                                </td>
                                <td class="value"><input type="text" class="input-val" name="Val" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-minvalue" name="MinValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-maxvalue" name="MaxValue" disabled="disabled" /></td>
                                <td class="value"><input type="text" class="input-defaultvalue" name="DefaultValue" disabled="disabled" /></td>
                                <td class="desc"><input type="text" class="input-desc" name="Desc" /></td>
                            </tr>
                        </tbody>
                    </table>
                </dd>
            </dl>
        </form>
            <div class="row" style="margin-bottom:20px;padding-left:15px;padding-right:30px;">
                <div class="col-md-6 col-sm-6">
                    <button type="button" class="btn btn-sunac" id="btn_save">编辑</button>
                </div>
                <div class="col-md-6 col-sm-6 text-right">
                    <button type="button" class="btn btn-sunac">删除</button>
                    <button type="button" class="btn btn-sunac">提交审核</button>
                </div>
            </div>
</div>

</div>
<script type="text/javascript">
    var options = {
        url: '/Window/Addhandle',
        type: 'post',
        data: $("#myform").serialize(),
        dataType: 'json',
        beforeSerialize: function () {
            var rtv = $("#myform").ValidationInput();
            return rtv;
        },
        success: function (data) {
            if (data.code == 100) {
                layer.msg(data.message, { icon: 6, time: 2000 }, function () {
                    window.location.href = "/Window/Index"
                });
            } else {
                layer.alert(data.message, { icon: 5, shade: false });
            }
        }
    };
    $(function () {
        $('input[name="radio_module"]').on("change", function () {
            let model = $(this).data("model");
            $(".dynamic_module").css("display", "none");
            $(".static_module").css("display", "none");
            $(model).css("display","block");
            
        })

        $('.param tr select[name="ValueType"]').on("change", function () {
            let value_type =parseInt($(this).val());
            let that = $(this).parent().parent();
            that.find('.input-val').attr("disabled", true);
            that.find('.input-minvalue').attr("disabled", true);
            that.find('.input-maxvalue').attr("disabled", true);
            that.find('.input-defaultvalue').attr("disabled",true); 
            switch (value_type)
            {
                case 1:
                    console.log(value_type);
                   
                    break;
                case 2:
                    that.find('.input-defaultvalue').removeAttr('disabled');
                    that.find('.input-defaultvalue').focus();
                    break;
                case 3:
                    that.find('.input-val').removeAttr('disabled');
                    that.find('.input-defaultvalue').removeAttr('disabled');
                    that.find('.input-val').focus();
                    break;
                case 4:
                    that.find('.input-minvalue').removeAttr('disabled');
                    that.find('.input-maxvalue').removeAttr('disabled');
                    that.find('.input-defaultvalue').removeAttr('disabled');
                    that.find('.input-minvalue').focus();
                    break;
                case 5:
                    that.find('.input-defaultvalue').removeAttr('disabled');
                    that.find('.input-defaultvalue').focus();
                    break;
                case 6:
                    that.find('.input-defaultvalue').removeAttr('disabled');
                    that.find('.input-defaultvalue').focus();
                    break;
                default:
                    break;

            }
        })

        $("#btn_save").on('click', function () {
            $("#myform").ajaxSubmit(options);
        });

        $("#btn_cancel").on('click', function () {
            $("#myform").resetForm();
        });
    })

</script>



